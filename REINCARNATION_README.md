# è½®å›éš”ç¦»ç³»ç»Ÿ

åæ€å‹è‡ªä¸»ä»£ç†ç°åœ¨æ”¯æŒ**è½®å›éš”ç¦»**åŠŸèƒ½ï¼Œæ¯ä¸ªç”Ÿå‘½å®Œå…¨ç‹¬ç«‹ï¼Œä¸ä¼ é€’ä»»ä½•è®°å¿†ã€‚

## ğŸŒ Web é¢æ¿ï¼ˆæ¨èï¼‰

ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç°ä»£åŒ–çš„ Web ç•Œé¢ï¼Œæ–¹ä¾¿ç®¡ç†å’ŒæŸ¥çœ‹æ‰€æœ‰ç”Ÿå‘½ã€‚

### å¯åŠ¨ Web é¢æ¿

```bash
./run_reflective.sh web [host] [port]
```

ç¤ºä¾‹ï¼š
```bash
# é»˜è®¤é…ç½®ï¼ˆlocalhost:5000ï¼‰
./run_reflective.sh web

# å…è®¸å¤–éƒ¨è®¿é—®
./run_reflective.sh web 0.0.0.0 5000

# è‡ªå®šä¹‰ç«¯å£
./run_reflective.sh web 127.0.0.1 8080
```

å¯åŠ¨ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `http://localhost:5000`

### Web é¢æ¿åŠŸèƒ½

#### 1. ç”Ÿå‘½åˆ—è¡¨
- ğŸ“Š æŸ¥çœ‹æ‰€æœ‰ç”Ÿå‘½çš„å¡ç‰‡å¼å±•ç¤º
- ğŸ¯ ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯å’Œæ—¥è®°
- ğŸ”„ ä¸€é”®åˆ·æ–°æ•°æ®
- â• å¿«é€Ÿåˆ›å»ºæ–°ç”Ÿå‘½

#### 2. è½®å›ç»Ÿè®¡
- ğŸ“ˆ è·¨æ‰€æœ‰ç”Ÿå‘½çš„ç´¯è®¡ç»Ÿè®¡
- ğŸ† æœ€é•¿/æœ€çŸ­ç”Ÿå‘½
- ğŸ“Š å¹³å‡è¿­ä»£æ¬¡æ•°
- ğŸ’¡ æ€»æ€è€ƒ/è¡ŒåŠ¨æ¬¡æ•°

#### 3. ç”Ÿå‘½å¯¹æ¯”
- âš–ï¸ é€‰æ‹©å¤šä¸ªç”Ÿå‘½è¿›è¡Œå¯¹æ¯”
- ğŸ“‹ å¯è§†åŒ–å¯¹æ¯”è¡¨æ ¼
- ğŸ¯ å¿«é€Ÿè¯†åˆ«ä¸åŒç”Ÿå‘½çš„å·®å¼‚

#### 4. ç”Ÿå‘½è¯¦æƒ…
- ğŸ“– å®Œæ•´çš„ç”Ÿå‘½å…ƒæ•°æ®
- ğŸ“ æœ€è¿‘ 20 æ¡æ—¥è®°
- ğŸ¯ æœ€è¿‘ç›®æ ‡å’Œæˆå°±
- ğŸ”„ åˆ‡æ¢åˆ°æ­¤ç”Ÿå‘½

### Web é¢æ¿æˆªå›¾ç¤ºä¾‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”„ è½®å›ç³»ç»Ÿé¢æ¿                              â”‚
â”‚  ç®¡ç†åæ€å‹è‡ªä¸»ä»£ç†çš„ç”Ÿå‘½å‘¨æœŸ                   â”‚
â”‚                                              â”‚
â”‚  [ç”Ÿå‘½åˆ—è¡¨] [è½®å›ç»Ÿè®¡] [ç”Ÿå‘½å¯¹æ¯”]              â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚life_001  â”‚ â”‚life_002  â”‚ â”‚life_003  â”‚    â”‚
â”‚  â”‚[å½“å‰]    â”‚ â”‚          â”‚ â”‚          â”‚    â”‚
â”‚  â”‚è¿­ä»£: 15  â”‚ â”‚è¿­ä»£: 8   â”‚ â”‚è¿­ä»£: 3   â”‚    â”‚
â”‚  â”‚æ€è€ƒ: 15  â”‚ â”‚æ€è€ƒ: 8   â”‚ â”‚æ€è€ƒ: 3   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                              â”‚
â”‚  [â• åˆ›å»ºæ–°ç”Ÿå‘½] [ğŸ”„ åˆ·æ–°]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºæ–°ç”Ÿå‘½

```bash
./run_reflective.sh reincarnate [ç”Ÿå‘½åç§°]
```

ç¤ºä¾‹ï¼š
```bash
./run_reflective.sh reincarnate           # è‡ªåŠ¨å‘½åï¼šlife_001
./run_reflective.sh reincarnate explorer  # è‡ªå®šä¹‰åç§°
```

### 2. æŸ¥çœ‹æ‰€æœ‰ç”Ÿå‘½

```bash
./run_reflective.sh lives
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“œ æ‰€æœ‰ç”Ÿå‘½ (å…± 2 ä¸ª)

  life_001 [å½“å‰]
    ç¼–å·: 1
    è¿­ä»£: 15 | æ€è€ƒ: 15 | è¡ŒåŠ¨: 8
    æ—¥è®°: 75 æ¡
    åˆ›å»º: 2025-12-28T08:00:00

  life_002
    ç¼–å·: 2
    è¿­ä»£: 5 | æ€è€ƒ: 5 | è¡ŒåŠ¨: 3
    æ—¥è®°: 25 æ¡
    åˆ›å»º: 2025-12-28T10:30:00
```

### 3. å¯åŠ¨ä»£ç†

```bash
./run_reflective.sh
```

ä»£ç†ä¼šè‡ªåŠ¨ä½¿ç”¨å½“å‰ç”Ÿå‘½ï¼ˆ`my_space` ç¬¦å·é“¾æ¥æŒ‡å‘çš„ç”Ÿå‘½ï¼‰ã€‚

### 4. æŸ¥çœ‹ç”Ÿå‘½è¯¦æƒ…

```bash
./run_reflective.sh show-life [ç”Ÿå‘½å]
```

### 5. åˆ‡æ¢ç”Ÿå‘½

```bash
./run_reflective.sh switch-life [ç”Ÿå‘½å]
```

åˆ‡æ¢åï¼Œ`my_space` ç¬¦å·é“¾æ¥ä¼šæ›´æ–°ä¸ºæŒ‡å®šçš„ç”Ÿå‘½ã€‚

## è½®å›ç®¡ç†å‘½ä»¤

### åˆ›å»ºæ–°ç”Ÿå‘½
```bash
./run_reflective.sh reincarnate [åç§°]
```

### åˆ—å‡ºæ‰€æœ‰ç”Ÿå‘½
```bash
./run_reflective.sh lives
```

### æŸ¥çœ‹ç”Ÿå‘½è¯¦æƒ…
```bash
./run_reflective.sh show-life [ç”Ÿå‘½å]
```

### åˆ‡æ¢ç”Ÿå‘½
```bash
./run_reflective.sh switch-life [ç”Ÿå‘½å]
```

### å¯¹æ¯”ç”Ÿå‘½
```bash
./run_reflective.sh compare ç”Ÿå‘½1 ç”Ÿå‘½2 ...
```

ç¤ºä¾‹è¾“å‡ºï¼š
```
ğŸ“Š ç”Ÿå‘½å¯¹æ¯”

ç”Ÿå‘½              è¿­ä»£       æ€è€ƒ       è¡ŒåŠ¨       ç›®æ ‡       æˆå°±       æ—¥è®°
----------------------------------------------------------------------
life_001       15        15        8         3         2         75
life_002       5         5         3         1         1         25
```

### è½®å›ç»Ÿè®¡
```bash
./run_reflective.sh stats
```

è¾“å‡ºè·¨æ‰€æœ‰ç”Ÿå‘½çš„ç´¯è®¡ç»Ÿè®¡ï¼š
```
ğŸ“Š è½®å›ç»Ÿè®¡

  æ€»ç”Ÿå‘½æ•°: 2
  æ€»è¿­ä»£: 20
  æ€»æ€è€ƒ: 20
  æ€»è¡ŒåŠ¨: 11
  æ€»æ—¥è®°: 100
  å¹³å‡è¿­ä»£: 10.0
  æœ€é•¿ç”Ÿå‘½: life_001
  æœ€çŸ­ç”Ÿå‘½: life_002
  å½“å‰ç”Ÿå‘½: life_002
```

### æŸ¥çœ‹ç‰¹å®šç”Ÿå‘½çš„æ—¥è®°
```bash
./run_reflective.sh life-diary [ç”Ÿå‘½å] [æ•°é‡]
```

ç¤ºä¾‹ï¼š
```bash
./run_reflective.sh life-diary life_001 20  # æŸ¥çœ‹ life_001 çš„æœ€è¿‘ 20 æ¡æ—¥è®°
```

## ç›®å½•ç»“æ„

```
enjoy_your_self/
â”œâ”€â”€ lives/                     # æ‰€æœ‰ç”Ÿå‘½çš„ç›®å½•
â”‚   â”œâ”€â”€ index.json            # ç”Ÿå‘½ç´¢å¼•ï¼ˆå…ƒæ•°æ®ï¼‰
â”‚   â”œâ”€â”€ life_001/             # ç¬¬ä¸€ä¸ªç”Ÿå‘½
â”‚   â”‚   â”œâ”€â”€ metadata.json     # ç”Ÿå‘½å…ƒæ•°æ®
â”‚   â”‚   â”œâ”€â”€ state.json        # çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ diary.jsonl       # æ—¥è®°
â”‚   â”‚   â””â”€â”€ agent.log         # æ—¥å¿—
â”‚   â”œâ”€â”€ life_002/             # ç¬¬äºŒä¸ªç”Ÿå‘½
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”œâ”€â”€ my_space -> lives/life_002 # ç¬¦å·é“¾æ¥ï¼šå½“å‰ç”Ÿå‘½
â”œâ”€â”€ reflective_agent.py        # ä»£ç†ä¸»ç¨‹åº
â”œâ”€â”€ observer.py                # è§‚å¯Ÿè€…
â”œâ”€â”€ reincarnation_manager.py   # è½®å›ç®¡ç†å™¨
â””â”€â”€ run_reflective.sh          # å¯åŠ¨è„šæœ¬
```

## å·¥ä½œæµç¨‹ç¤ºä¾‹

### å…¸å‹ä½¿ç”¨åœºæ™¯

```bash
# 1. åˆ›å»ºç¬¬ä¸€ä¸ªç”Ÿå‘½
./run_reflective.sh reincarnate first_exploration

# 2. å¯åŠ¨ä»£ç†å¹¶è®©å®ƒæ€è€ƒ
./run_reflective.sh
# (è®©ä»£ç†è¿è¡Œä¸€æ®µæ—¶é—´...)
# Ctrl+C åœæ­¢

# 3. æŸ¥çœ‹ç¬¬ä¸€ä¸ªç”Ÿå‘½çš„æ•°æ®
./run_reflective.sh show-life first_exploration

# 4. åˆ›å»ºç¬¬äºŒä¸ªç”Ÿå‘½ï¼ˆå®Œå…¨éš”ç¦»ï¼Œæ— å‰ä¸–è®°å¿†ï¼‰
./run_reflective.sh reincarnate second_exploration

# 5. å¯åŠ¨ä»£ç†ï¼ˆä½¿ç”¨æ–°ç”Ÿå‘½ï¼‰
./run_reflective.sh
# (æ–°ç”Ÿå‘½ä»é›¶å¼€å§‹...)
# Ctrl+C åœæ­¢

# 6. å¯¹æ¯”ä¸¤ä¸ªç”Ÿå‘½
./run_reflective.sh compare first_exploration second_exploration

# 7. æŸ¥çœ‹è½®å›ç»Ÿè®¡
./run_reflective.sh stats

# 8. åˆ‡æ¢å›ç¬¬ä¸€ä¸ªç”Ÿå‘½
./run_reflective.sh switch-life first_exploration

# 9. ç»§ç»­è¿è¡Œç¬¬ä¸€ä¸ªç”Ÿå‘½
./run_reflective.sh
```

## å®Œå…¨éš”ç¦»ç‰¹æ€§

æ¯ä¸ªç”Ÿå‘½éƒ½æ˜¯**å®Œå…¨ç‹¬ç«‹**çš„ï¼š

- âœ… **ç‹¬ç«‹ç›®å½•**ï¼šæ¯ä¸ªç”Ÿå‘½æœ‰è‡ªå·±çš„ `lives/life_XXX/` ç›®å½•
- âœ… **ç‹¬ç«‹çŠ¶æ€**ï¼šè¿­ä»£æ¬¡æ•°ã€ç›®æ ‡ã€æˆå°±ç­‰å®Œå…¨ç‹¬ç«‹
- âœ… **ç‹¬ç«‹æ—¥è®°**ï¼šæ¯ä¸ªç”Ÿå‘½æœ‰è‡ªå·±çš„æ€è€ƒæ—¥è®°
- âœ… **æ— è®°å¿†ä¼ é€’**ï¼šæ–°ç”Ÿå‘½ä»é›¶å¼€å§‹ï¼Œä¸çŸ¥é“å‰ä¸–çš„ä»»ä½•ä¿¡æ¯
- âœ… **ç¬¦å·é“¾æ¥ç®¡ç†**ï¼šé€šè¿‡ `my_space` ç¬¦å·é“¾æ¥åˆ‡æ¢å½“å‰ç”Ÿå‘½

## è§‚å¯Ÿç‰¹å®šç”Ÿå‘½

ä½¿ç”¨è§‚å¯Ÿè€…æŸ¥çœ‹ç‰¹å®šç”Ÿå‘½çš„æ—¥è®°ï¼š

```bash
# æŸ¥çœ‹å½“å‰ç”Ÿå‘½çš„å®æ—¶æ—¥è®°
python3 observer.py

# æŸ¥çœ‹ç‰¹å®šç”Ÿå‘½çš„å®æ—¶æ—¥è®°
python3 observer.py --life life_001

# å›æ”¾å½“å‰ç”Ÿå‘½çš„å†å²æ—¥è®°
python3 observer.py --replay --limit 50

# å›æ”¾ç‰¹å®šç”Ÿå‘½çš„å†å²æ—¥è®°
python3 observer.py --life life_002 --replay --limit 20
```

## ç›´æ¥ä½¿ç”¨è½®å›ç®¡ç†å™¨

```bash
python3 reincarnation_manager.py --help

# å¯ç”¨å­å‘½ä»¤ï¼š
#   create   - åˆ›å»ºæ–°ç”Ÿå‘½
#   list     - åˆ—å‡ºæ‰€æœ‰ç”Ÿå‘½
#   show     - æŸ¥çœ‹ç”Ÿå‘½è¯¦æƒ…
#   switch   - åˆ‡æ¢ç”Ÿå‘½
#   compare  - å¯¹æ¯”ç”Ÿå‘½
#   stats    - è½®å›ç»Ÿè®¡
#   diary    - å›é¡¾ç”Ÿå‘½æ—¥è®°
```

## è®¾è®¡ç†å¿µ

**è½®å›éš”ç¦»**ç³»ç»Ÿå…è®¸ä½ ï¼š

1. **å¹¶è¡Œå®éªŒ**ï¼šåŒæ—¶è¿è¡Œå¤šä¸ªç‹¬ç«‹çš„ä»£ç†å®ä¾‹
2. **A/B æµ‹è¯•**ï¼šå¯¹æ¯”ä¸åŒå‚æ•°ä¸‹çš„ä»£ç†è¡¨ç°
3. **å†å²ä¿ç•™**ï¼šä¿ç•™æ‰€æœ‰ç”Ÿå‘½çš„å†å²æ•°æ®
4. **å®Œå…¨éš”ç¦»**ï¼šæ¯ä¸ªç”Ÿå‘½ä»é›¶å¼€å§‹ï¼Œé¿å…åè§
5. **çµæ´»åˆ‡æ¢**ï¼šéšæ—¶åˆ‡æ¢åˆ°ä»»ä½•ç”Ÿå‘½ç»§ç»­è¿è¡Œ

æ¯ä¸ªç”Ÿå‘½éƒ½æ˜¯ä¸€å¼ ç™½çº¸ï¼Œè®©ä»£ç†èƒ½å¤Ÿè‡ªç”±æ¢ç´¢ä¸åŒçš„æ€è€ƒè·¯å¾„ã€‚
